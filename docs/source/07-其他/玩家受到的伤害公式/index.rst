.. _玩家受到的伤害公式:

玩家受到的伤害公式
==============================================================================

1. 计算敌人造成的伤害, 该伤害来源如果是玩家, 那么则受装备, 技能等影响. 在不出Bug的情况下是玩家的面板显示伤害. 我们记做 ``DMG`` (Damage). 该数值计算复杂, 因素极多, 我们放在别的章节讨论.
2. 然后乘以 XvX 系数, PvP 为 1/6, PvE 为 1.
3. 剩下的伤害被 能量护盾 (法师闪电系技能) 吸收, 被吸收掉的伤害烧去你的法力. 法师的能量护盾的吸收比率我们记做 ``ES``. 例如20级的能量护盾能吸收 75% 的伤害, 那么 ``ES`` 值为 75%.
4. 剩下的伤害被 台风装甲 (德鲁伊元素系技能) 吸收, 只对 火焰, 冰冷, 闪电 伤害有效. 台风装甲吸收的伤害我们记做 ``CA``. 值为 100 代表者可以吸收 100 点 火冰电 伤害.
5. 剩下的伤害被 装备上的 "伤害减少 XX 点" 和 "魔法伤害减少 XX 点" 抵消, 其中前者对 物理和魔法 伤害都有效, 后者只对 魔法伤害 有效. 多条同类属性的数值直接相加. 这个值我们记做 ``DR``.
6. 剩下的伤害被身上的抗性减少, 包括 魔法, 火焰, 冰冷, 闪电, 毒素, 物理 抗性, 如果抗性被降为负数, 则变为增加伤害. 其中物理抗性只由装备上的 "伤害减少 X%" 提供, 以及刺客本人投资 能量消解 技能提供. 我们将其记做 ``RES``, 例如 75 火抗时这个值就等于 75%)
7. 剩下的伤害被身上的 "+ XX% 火焰/冰冷/闪电 吸收" 属性所吸收, 被吸收的部分转做治疗. 如 矮人之星戒指上的吸火, 鬼火戒指上的吸电. 我们将这个值记做 ``ABSORB_PERC``.
8. 剩下的伤害被身上的 "+ XX 点 火焰/冰冷/闪电 吸收" 属性所吸收, 被吸收的部分转做治疗. 如 雷神之力腰带上的吸电. 我们将这个值记做 ``ABSORB``.
9. 剩下的伤害作用在你身上, 从你的当前生命中减去.
10. 被减去的生命受到 "XX% 的伤害转化为法力" 的影响, 恢复一定法力值.

总结下来, 伤害公式为: ``(DMG * (1 - ES) - CA - DR) * (1 - RES) * (1 - 2 * ABSORB_PERC) - 2 * ABSORB``


一些总结
------------------------------------------------------------------------------

- 能量护盾的价值: 从公式来看, 能量护盾作用的时期最早, 在装备的支持下可以加到吸收 95% 的伤害, 每吸收一点伤害吸收 0.5 点法力. 游戏中玩家杀手 Act5 世界之石要塞 电鬼 的一次闪电伤害在 192-288 之间 (金怪的特殊属性可以使其更高). 在能量护盾的作用下, 第一步就可以将这部分伤害消减为只剩下 288 * 5% = 14 点了. 而玩家消耗了 136 法力. 也就是说如果玩家有较高的回蓝 (全精力法师配合眼光可以做到每秒回400法力), 在没有 法力燃烧 词缀的情况下, 怪物基本打不动你.
- 抗性的价值: 从公式来看, 抗性以乘法关系影响最终伤害. 如果在有圣堂武士外袍的情况下, 玩家是可以将四防堆到 90 的, 也就是说最终只会受到 10% 的法术伤害, 也基本保证安全了.
- 按数值吸火吸电吸冰类的属性由于作用在公式的最后面, 此时伤害已经很低了, 所以效果超群, 对于特定系的伤害, 基本可以做到无视了.
- DR属性 (例如海蛇皮上的 13MDR) 作用的时间比较靠前, 在没有 ES 的情况下效果非常不理想, 而且比较难堆, 所以性价比比较差.
